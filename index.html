<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="Ut1qhmXXtqvSXdt0VNVE7NtExPVoxMhepjoQRr6XbMo" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>GUANES Legal Tech | Oficina Virtual & Blockchain</title>
    <meta name="description"
        content="Plataforma legal integral: Liquidaci√≥n laboral, demandas automatizadas y certificaci√≥n de documentos en Blockchain (Solana).">

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <script type="text/javascript" src="https://checkout.wompi.co/widget.js"></script>

    <style>
        :root {
            --primary: #0F172A;
            --brand: #2563EB;
            --accent: #F59E0B;
            --bg: #F0F4F8;
            --white: #ffffff;
            --gradient: linear-gradient(135deg, #2563EB 0%, #1E40AF 100%);
            --crypto: #10B981;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg);
            color: #334155;
            margin: 0;
            line-height: 1.6;
            padding-top: 40px;
        }

        * {
            box-sizing: border-box;
        }

        a {
            text-decoration: none;
        }

        /* FLASH NEWS */
        .daily-flash-bar {
            background-color: #1e293b;
            color: white;
            padding: 10px 5%;
            font-size: 0.9rem;
            font-weight: 500;
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .flash-tag {
            background: var(--brand);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* HEADER */
        header {
            background: linear-gradient(180deg, #ffffff 0%, #e2e8f0 100%);
            padding: 5rem 1rem 3rem;
            text-align: center;
            position: relative;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            margin: 0;
            line-height: 1.1;
        }

        .badge {
            background: #dbeafe;
            color: var(--brand);
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            display: inline-block;
        }

        /* HEADER BUTTONS GROUP */
        .header-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn-generate {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 800;
            color: white;
            background: var(--gradient);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.4);
            transition: 0.3s;
            display: inline-block;
        }

        .btn-generate:hover {
            transform: translateY(-3px);
        }

        /* ESTILO BOT√ìN BLOCKCHAIN */
        .btn-crypto {
            background: #10B981;
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-crypto:hover {
            background: #059669;
        }

        /* RADAR SYSTEM */
        .news-section {
            padding: 0 5%;
            margin-top: 20px;
            position: relative;
            z-index: 10;
            margin-bottom: 40px;
        }

        .news-grid-system {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .radar-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border-top: 5px solid #ccc;
            transition: transform 0.3s ease;
        }

        .radar-card:hover {
            transform: translateY(-5px);
        }

        .radar-header {
            padding: 15px;
            color: white;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .radar-vital {
            border-color: #2563EB;
        }

        .radar-vital .radar-header {
            background: #2563EB;
        }

        .radar-patrimonio {
            border-color: #F59E0B;
        }

        .radar-patrimonio .radar-header {
            background: #F59E0B;
            color: #0F172A;
        }

        .radar-body {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 200px;
        }

        .radar-title {
            font-size: 1.1rem;
            font-weight: 800;
            margin: 0 0 10px 0;
            color: #0F172A;
            line-height: 1.3;
        }

        .radar-hook {
            font-size: 0.95rem;
            color: #475569;
            margin-bottom: 15px;
            border-left: 3px solid #ddd;
            padding-left: 10px;
            font-style: italic;
        }

        .radar-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: 0.2s;
            margin-top: auto;
        }

        .btn-vital {
            background: #eff6ff;
            color: #2563EB;
            border: 1px solid #bfdbfe;
        }

        .btn-vital:hover {
            background: #2563EB;
            color: white;
        }

        .btn-patrimonio {
            background: #fff7ed;
            color: #d97706;
            border: 1px solid #fed7aa;
        }

        .btn-patrimonio:hover {
            background: #F59E0B;
            color: white;
        }

        @media(max-width: 768px) {
            .news-grid-system {
                grid-template-columns: 1fr;
            }
        }

        /* CALCULADORA */
        @media print {
            body * {
                visibility: hidden;
            }

            #calculadora,
            #calculadora * {
                visibility: visible;
            }

            #calculadora {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                border: none !important;
                margin: 0 !important;
                padding: 0 !important;
            }

            .no-print {
                display: none !important;
            }

            .print-only {
                display: block !important;
            }
        }

        .print-only {
            display: none;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
        }

        /* SERVICES & FORM */
        .services-section {
            padding: 4rem 5% 3rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 2rem;
            font-weight: 800;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .service-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: 0.3s;
            cursor: pointer;
        }

        .service-card:hover {
            transform: translateY(-5px);
            border-color: var(--brand);
            box-shadow: 0 15px 30px rgba(37, 99, 235, 0.15);
        }

        /* CARD ESPECIAL BLOCKCHAIN */
        .card-blockchain {
            border-color: #10B981;
            background: #f0fdf4;
        }

        .card-blockchain:hover {
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.2);
        }

        .s-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .s-info h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--primary);
        }

        .s-info p {
            margin: 2px 0 0;
            font-size: 0.9rem;
            color: #64748b;
        }

        #app-generator {
            background: var(--primary);
            padding: 4rem 1rem;
            background-image: radial-gradient(#1e293b 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .app-box {
            background: white;
            max-width: 800px;
            margin: 0 auto;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border-top: 6px solid var(--accent);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            color: #1e293b;
        }

        .input-control {
            width: 100%;
            padding: 14px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            background: #f8fafc;
            transition: 0.3s;
        }

        .input-control:focus {
            outline: none;
            border-color: var(--brand);
            background: #fff;
        }

        .btn-full {
            width: 100%;
            margin-top: 1.5rem;
        }

        .btn-generate:disabled {
            background: #94a3b8;
            cursor: wait;
        }

        .hidden {
            display: none;
        }

        .highlight-box {
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            border: 1px solid #e2e8f0;
        }

        .theme-laboral {
            background: #eff6ff;
            border-color: #bfdbfe;
        }

        .theme-inmuebles {
            background: #fff7ed;
            border-color: #fed7aa;
        }

        .theme-vehiculos {
            background: #ecfeff;
            border-color: #a5f3fc;
        }

        .theme-transito {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }

        .theme-salud {
            background: #fef2f2;
            border-color: #fecaca;
        }

        .theme-civil {
            background: #faf5ff;
            border-color: #e9d5ff;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: #94a3b8;
            background: #020617;
        }

        /* WHATSAPP FLOTANTE */
        .float-wa {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 30px;
            right: 30px;
            background-color: #25d366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 3px #999;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }

        .float-wa:hover {
            background-color: #128C7E;
            transform: scale(1.1);
        }

        /* MODAL BLOCKCHAIN */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--crypto);
            text-align: center;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-icon {
            font-size: 3rem;
            color: var(--crypto);
            margin-bottom: 1rem;
            background: #ecfdf5;
            width: 80px;
            height: 80px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-title {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 800;
            margin: 0 0 1rem 0;
        }

        .modal-text {
            color: #475569;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .modal-benefits {
            text-align: left;
            background: #f8fafc;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .benefit-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #334155;
        }

        .benefit-item i {
            color: var(--crypto);
            margin-top: 3px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .btn-modal-cancel {
            background: #e2e8f0;
            color: #475569;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-modal-cancel:hover {
            background: #cbd5e1;
        }

        .btn-modal-confirm {
            background: var(--crypto);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-modal-confirm:hover {
            background: #059669;
            transform: translateY(-2px);
        }
    </style>
</head>

<body>

    <div class="daily-flash-bar">
        <span class="flash-tag">HOY EN COLOMBIA:</span>
        <span id="dailyNewsText"><i class="fas fa-spinner fa-spin"></i> Cargando actualidad jur√≠dica...</span>
    </div>

    <header>
        <span class="badge">‚ú® Oficina Virtual 24/7</span>
        <h1>GUANES <span style="color:var(--brand);">LEGAL</span></h1>
        <p style="font-size: 1.2rem; max-width: 600px; margin: 10px auto; color: #475569;">DOCUMENTOS LEGALES
            INTELIGENTES. SIN CITAS. SIN ESPERAS. Genera tu defensa o contrato en segundos, validado por Inteligencia
            Artificial y firmado digitalmente.</p>

        <div class="header-actions">
            <a href="arriendo-seguro.html" class="btn-generate">
                Iniciar Tr√°mite Ahora
            </a>
            <button onclick="irDirectoAlServicio('cobro')" class="btn-secondary"
                style="background:var(--primary); color:white; border:none; padding:1rem 2rem; border-radius:12px; font-weight:800; cursor:pointer; font-size:1.1rem; display:flex; align-items:center; gap:10px;">
                üõ°Ô∏è EVITAR EMBARGO / DEUDA
            </button>
        </div>
    </header>

    <div class="news-section">
        <div class="news-grid-system">

            <div class="radar-card radar-vital">
                <div class="radar-header">
                    <i class="fas fa-heartbeat"></i> Protecci√≥n Vital & Salud
                </div>
                <div class="radar-body" id="cardVitalBody">
                    <div>
                        <h3 class="radar-title">
                            üö® TRIUNFO HIST√ìRICO: Corte ordena a EPS autorizar servicios fundamentales...
                        </h3>
                        <p class="radar-hook">
                            ¬øSu EPS le niega autorizaciones o medicamentos? Este nuevo fallo lo blinda. Radicamos su
                            TUTELA hoy mismo.
                        </p>
                    </div>
                    <button onclick="activarServicio('Salud')" class="radar-btn btn-vital">
                        <i class="fas fa-file-medical"></i> INTERPONER TUTELA (GRATIS)
                    </button>
                </div>
            </div>

            <div class="radar-card radar-patrimonio">
                <div class="radar-header">
                    <i class="fas fa-coins"></i> Defensa del Patrimonio
                </div>
                <div class="radar-body" id="cardPatrimonioBody">
                    <div>
                        <h3 class="radar-title">Monitoreando Multas...</h3>
                        <p class="radar-hook">Buscando oportunidades en Tr√°nsito, Civil o Inmuebles...</p>
                    </div>
                    <button class="radar-btn btn-patrimonio" disabled>
                        <i class="fas fa-spinner fa-spin"></i> Escaneando...
                    </button>
                </div>
            </div>

        </div>
    </div>

    <section id="calculadora"
        style="padding: 4rem 1rem; background: #f8fafc; border-top: 5px solid var(--accent); margin-top: 2rem;">
        <div
            style="max-width: 800px; margin: 0 auto; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">

            <div class="print-only">
                <h1 style="color: var(--primary);">GUANES ABOGADOS</h1>
                <p>Reporte de Liquidaci√≥n Laboral Preliminar</p>
            </div>

            <div class="no-print" style="text-align: center; margin-bottom: 2rem;">
                <span
                    style="background: var(--brand); color: white; padding: 5px 15px; border-radius: 50px; font-size: 0.8rem; font-weight: 700;">HERRAMIENTA
                    GRATUITA</span>
                <h2 style="color: var(--primary); margin-top: 10px;">Calculadora de Liquidaci√≥n 2026</h2>
                <p style="color: #64748b;">¬øLo despidieron o renunci√≥? Calcule el valor legal en segundos.</p>
            </div>

            <form id="laborForm" class="no-print">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <label>Salario Mensual ($)</label>
                        <input type="number" id="lab_salario" class="input-control" placeholder="Ej: 1300000" required
                            style="width:100%; padding:10px;">
                        <p style="font-size: 0.75rem; color: #64748b; margin-top: 5px; line-height: 1.2;">
                            <i class="fas fa-info-circle"></i> Ingrese solo el <strong>Salario B√°sico</strong>.
                        </p>
                    </div>

                    <div><label>Motivo Salida</label>
                        <select id="lab_motivo" class="input-control" required style="width:100%; padding:10px;">
                            <option value="renuncia">Renuncia Voluntaria / Fin Contrato</option>
                            <option value="despido_injusto">Despido SIN Justa Causa</option>
                            <option value="justa_causa">Despido CON Justa Causa</option>
                        </select>
                    </div>
                    <div><label>Fecha Inicio</label><input type="date" id="lab_inicio" class="input-control" required
                            style="width:100%; padding:10px;"></div>
                    <div><label>Fecha Fin</label><input type="date" id="lab_fin" class="input-control" required
                            style="width:100%; padding:10px;"></div>
                </div>
                <button type="submit"
                    style="width: 100%; margin-top: 20px; background: var(--primary); color: white; padding: 15px; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; font-size: 1rem;">
                    <i class="fas fa-calculator"></i> CALCULAR LIQUIDACI√ìN
                </button>
            </form>

            <div id="laborResult"
                style="display: none; margin-top: 2rem; border-top: 2px dashed #e2e8f0; padding-top: 2rem;">

                <h3 style="text-align: center; color: var(--primary);">Detalle de Conceptos</h3>
                <p style="text-align: center; font-size: 0.9rem;">D√≠as Liquidados: <strong id="res_dias">0</strong> |
                    Auxilio Transporte: <strong id="res_aux">...</strong></p>

                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: 0.9rem;">
                    <tr style="background: #f1f5f9;">
                        <th style="padding:8px; text-align:left;">Concepto</th>
                        <th style="padding:8px; text-align:right;">Valor Estimado</th>
                    </tr>
                    <tr>
                        <td style="padding:8px; border-bottom:1px solid #eee;">Cesant√≠as (Art. 249 CST)</td>
                        <td style="padding:8px; border-bottom:1px solid #eee; text-align:right;" id="res_cesantias">$0
                        </td>
                    </tr>
                    <tr>
                        <td style="padding:8px; border-bottom:1px solid #eee;">Intereses (Ley 52/1975)</td>
                        <td style="padding:8px; border-bottom:1px solid #eee; text-align:right;" id="res_intereses">$0
                        </td>
                    </tr>
                    <tr>
                        <td style="padding:8px; border-bottom:1px solid #eee;">Prima (Art. 306 CST)</td>
                        <td style="padding:8px; border-bottom:1px solid #eee; text-align:right;" id="res_prima">$0</td>
                    </tr>
                    <tr>
                        <td style="padding:8px; border-bottom:1px solid #eee;">Vacaciones (Art. 186 CST)</td>
                        <td style="padding:8px; border-bottom:1px solid #eee; text-align:right;" id="res_vacaciones">$0
                        </td>
                    </tr>
                    <tr style="color:var(--accent); font-weight:bold;">
                        <td style="padding:8px;">Indemnizaci√≥n (<span id="res_norma_indem"
                                style="font-size:0.8rem;"></span>)</td>
                        <td style="padding:8px; text-align:right;" id="res_indemnizacion">$0</td>
                    </tr>
                    <tr style="background:var(--primary); color:white; font-size:1.2rem;">
                        <td style="padding:15px;">TOTAL A RECLAMAR</td>
                        <td style="padding:15px; text-align:right; font-weight:800;" id="res_total">$0</td>
                    </tr>
                </table>

                <div class="no-print"
                    style="margin-top: 25px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button onclick="window.print()"
                        style="background: #64748b; color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-print"></i> Imprimir Concepto
                    </button>
                    <a href="https://q-win.lat" target="_blank"
                        style="background: #ea580c; color: white; text-align: center; padding: 12px; text-decoration: none; border-radius: 6px; font-weight: bold;">
                        üçÄ Probar Suerte en Q-Win
                    </a>
                </div>

                <div class="no-print"
                    style="margin-top: 15px; background: #eff6ff; padding: 15px; border-radius: 8px; border: 1px solid #bfdbfe; text-align: center;">
                    <p style="margin:0 0 10px 0; color: var(--primary);"><strong>¬øEl empleador se niega a pagar este
                            valor?</strong></p>
                    <button onclick="activarServicio('Laboral')"
                        style="background: var(--brand); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;">Descargar
                        Reclamaci√≥n Formal (GRATIS)</button>
                </div>

                <p style="font-size: 0.7rem; color: #94a3b8; margin-top: 20px; text-align: justify; line-height: 1.2;">
                    <strong>AVISO LEGAL:</strong> Documento informativo de car√°cter acad√©mico generado por Guanes
                    Abogados. No constituye t√≠tulo ejecutivo ni sentencia judicial. Los valores son aproximados seg√∫n
                    los datos suministrados.
                </p>
            </div>
        </div>
    </section>

    <section class="services-section">
        <h2 class="section-title">Nuestros Servicios (GRATIS POR 2 D√çAS)</h2>
        <div class="services-grid">

            <div class="service-card" onclick="activarServicio('Laboral')">
                <div class="s-icon" style="background:#eff6ff; color:var(--brand);"><i class="fas fa-hard-hat"></i>
                </div>
                <div class="s-info">
                    <h3>Reclamaci√≥n Laboral</h3>
                    <p>Despidos.</p>
                </div>
            </div>
            <div class="service-card" onclick="activarServicio('Inmuebles')">
                <div class="s-icon" style="color:#ea580c; background:#fff7ed;"><i class="fas fa-home"></i></div>
                <div class="s-info">
                    <h3>Contratos Arriendo</h3>
                    <p>Inmuebles.</p>
                </div>
            </div>
            <div class="service-card" onclick="activarServicio('Veh√≠culos')">
                <div class="s-icon" style="color:#0891b2; background:#ecfeff;"><i class="fas fa-car"></i></div>
                <div class="s-info">
                    <h3>Contratos Veh√≠culos</h3>
                    <p>Compraventa.</p>
                </div>
            </div>
            <div class="service-card" onclick="activarServicio('Tr√°nsito')">
                <div class="s-icon" style="color:#166534; background:#f0fdf4;"><i class="fas fa-traffic-light"></i>
                </div>
                <div class="s-info">
                    <h3>Fotomultas</h3>
                    <p>Defensa Tr√°nsito.</p>
                </div>
            </div>
            <div class="service-card" onclick="activarServicio('Salud')">
                <div class="s-icon" style="color:#dc2626; background:#fef2f2;"><i class="fas fa-heartbeat"></i></div>
                <div class="s-info">
                    <h3>Tutelas</h3>
                    <p>Salud.</p>
                </div>
            </div>
            <div class="service-card" onclick="activarServicio('Cobro')">
                <div class="s-icon" style="color:#7e22ce; background:#faf5ff;"><i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="s-info">
                    <h3>Cobro de Deudas</h3>
                    <p>Recuperaci√≥n.</p>
                </div>
            </div>

        </div>
    </section>

    <section id="app-generator">
        <style>
            /* ESTILO MINIMALISTA SERIO */
            .form-container {
                background: #f9f9f9;
                padding: 25px;
                border-radius: 8px;
                border: 1px solid #ddd;
                font-family: 'Helvetica', sans-serif;
                max-width: 800px;
                margin: 0 auto;
            }

            .form-group {
                margin-bottom: 15px;
            }

            label {
                display: block;
                font-weight: bold;
                color: #2c3e50;
                margin-bottom: 5px;
            }

            input,
            select,
            textarea {
                width: 100%;
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 14px;
                box-sizing: border-box;
            }

            .hidden {
                display: none;
            }

            /* Clase para ocultar secciones */

            .btn-generar {
                background-color: #27ae60;
                color: white;
                border: none;
                padding: 15px;
                width: 100%;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                border-radius: 5px;
                margin-top: 10px;
            }

            .btn-generar:hover {
                background-color: #219150;
            }

            .aviso {
                font-size: 11px;
                color: #777;
                margin-top: 10px;
                text-align: center;
            }
        </style>

        <div class="form-container">
            <h3 style="color:#2c3e50; text-align:center;">Generador de Documentos Legales IA</h3>

            <form id="legalForm">

                <div class="form-group">
                    <label>¬øQu√© documento necesita hoy?</label>
                    <select id="servicioSelector" required onchange="cambiarFormulario()">
                        <option value="" disabled selected>-- Seleccione una opci√≥n --</option>
                        <option value="transito">üöó Fotomultas / Tr√°nsito</option>
                        <option value="laboral">üíº Liquidaci√≥n Laboral / Despido</option>
                        <option value="inmuebles">üè† Contrato de Arriendo</option>
                        <option value="vehiculos">üöô Compraventa de Veh√≠culo</option>
                        <option value="salud">üè• Acci√≥n de Tutela (Salud)</option>
                        <option value="cobro">üí∏ Cobro de Deuda</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Su Nombre Completo</label>
                    <input type="text" id="nombre" placeholder="Ej: Juan P√©rez" required>
                </div>
                <div class="form-group">
                    <label>Su C√©dula</label>
                    <input type="text" id="cedula" placeholder="Ej: 12345678" required>
                </div>
                <div class="form-group">
                    <label>Correo Electr√≥nico (Aqu√≠ llegar√° el PDF)</label>
                    <input type="email" id="email" placeholder="juan@email.com" required>
                </div>

                <div id="campos-transito" class="hidden">
                    <div class="form-group"><label>Placa del Veh√≠culo</label><input type="text" id="t_placa"
                            placeholder="Ej: ABC-123"></div>
                    <div class="form-group"><label>Organismo de Tr√°nsito</label><input type="text" id="t_organismo"
                            placeholder="Ej: Medell√≠n, Bogot√°"></div>
                    <div class="form-group"><label>Fecha del Comparendo</label><input type="date" id="t_fecha"></div>
                </div>

                <div id="campos-laboral" class="hidden">
                    <div class="form-group"><label>Nombre de la Empresa</label><input type="text" id="l_empresa"
                            placeholder="Ej: Soluciones SAS"></div>
                    <div class="form-group"><label>Salario Mensual</label><input type="number" id="l_salario"
                            placeholder="Ej: 1500000"></div>
                    <div class="form-group"><label>Motivo de Salida</label>
                        <select id="l_motivo">
                            <option value="Despido Sin Justa Causa">Despido Sin Justa Causa</option>
                            <option value="Renuncia">Renuncia Voluntaria</option>
                            <option value="Terminaci√≥n Contrato">Terminaci√≥n de Contrato</option>
                        </select>
                    </div>
                    <div class="form-group"><label>Fecha Inicio</label><input type="date" id="l_inicio"></div>
                    <div class="form-group"><label>Fecha Fin</label><input type="date" id="l_fin"></div>
                </div>

                <div id="campos-inmuebles" class="hidden">
                    <div class="form-group"><label>Direcci√≥n del Inmueble</label><input type="text" id="i_direccion"
                            placeholder="Ej: Calle 10 # 5-20"></div>
                    <div class="form-group"><label>Valor del Canon</label><input type="number" id="i_canon"
                            placeholder="Ej: 800000"></div>
                    <div class="form-group"><label>Nombre del Inquilino</label><input type="text" id="i_inquilino">
                    </div>
                </div>

                <div id="campos-genericos" class="hidden">
                    <div class="form-group"><label>Contraparte (A qui√©n demandamos/cobramos)</label><input type="text"
                            id="g_contraparte"></div>
                    <div class="form-group"><label>Describa los Hechos (Brevemente)</label><textarea id="g_hechos"
                            rows="3"></textarea></div>
                </div>

                <button type="submit" class="btn-generar">GENERAR DOCUMENTO GRATIS ‚ö°</button>
                <p class="aviso">Versi√≥n Beta Gratuita - Dr. Manuel Prada</p>
            </form>
        </div>

        <script>
            const WEBHOOK_PRODUCCION = "https://n8n-production-612f.up.railway.app/webhook/cb4edfe2-eaea-47dd-8f97-22afccd72810";

            // 0. NAVEGACI√ìN Y COMPATIBILIDAD
            function irDirectoAlServicio(servicio) {
                const select = document.getElementById('servicioSelector');
                const map = {
                    'Laboral': 'laboral',
                    'Inmuebles': 'inmuebles',
                    'Veh√≠culos': 'vehiculos',
                    'Tr√°nsito': 'transito',
                    'Salud': 'salud',
                    'Cobro': 'cobro'
                };
                const val = map[servicio] || servicio;

                select.value = val;
                cambiarFormulario();
                document.getElementById('app-generator').scrollIntoView({ behavior: 'smooth' });
            }
            window.activarServicio = irDirectoAlServicio; // Para botones antiguos

            // 1. CAMBIAR CAMPOS SEG√öN SELECCI√ìN
            function cambiarFormulario() {
                const servicio = document.getElementById('servicioSelector').value;

                // Ocultar todo primero
                document.getElementById('campos-transito').classList.add('hidden');
                document.getElementById('campos-laboral').classList.add('hidden');
                document.getElementById('campos-inmuebles').classList.add('hidden');
                document.getElementById('campos-genericos').classList.add('hidden');

                // Mostrar el correcto
                if (servicio === 'transito') document.getElementById('campos-transito').classList.remove('hidden');
                else if (servicio === 'laboral') document.getElementById('campos-laboral').classList.remove('hidden');
                else if (servicio === 'inmuebles') document.getElementById('campos-inmuebles').classList.remove('hidden');
                else document.getElementById('campos-genericos').classList.remove('hidden'); // Para salud, cobro, vehiculos
            }

            // 2. ENVIAR DATOS A N8N
            document.getElementById('legalForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const btn = document.querySelector('.btn-generar');
                btn.innerHTML = "‚è≥ Redactando con IA... (Espere)";
                btn.disabled = true;

                // Recoger datos b√°sicos
                const data = {
                    servicio: document.getElementById('servicioSelector').value,
                    cliente: {
                        nombre: document.getElementById('nombre').value,
                        cedula: document.getElementById('cedula').value,
                        email: document.getElementById('email').value
                    },
                    detalles: {}
                };

                // Recoger detalles seg√∫n servicio
                if (data.servicio === 'transito') {
                    data.detalles.placa = document.getElementById('t_placa').value;
                    data.detalles.organismo = document.getElementById('t_organismo').value;
                    data.detalles.fecha_comparendo = document.getElementById('t_fecha').value;
                } else if (data.servicio === 'laboral') {
                    data.detalles.contraparte = document.getElementById('l_empresa').value;
                    data.detalles.salario = document.getElementById('l_salario').value;
                    data.detalles.motivo = document.getElementById('l_motivo').value;
                    data.detalles.fecha_inicio = document.getElementById('l_inicio').value;
                    data.detalles.fecha_fin = document.getElementById('l_fin').value;
                } else if (data.servicio === 'inmuebles') {
                    data.detalles.direccion_inmueble = document.getElementById('i_direccion').value;
                    data.detalles.canon_valor = document.getElementById('i_canon').value;
                    data.detalles.tipo_contrato = "Vivienda Urbana";
                } else {
                    // Gen√©ricos
                    data.detalles.contraparte = document.getElementById('g_contraparte').value;
                    data.detalles.hechos_pretension = document.getElementById('g_hechos').value;
                }

                // ENVIAR AL WEBHOOK DE N8N (Producci√≥n)
                try {
                    const response = await fetch(WEBHOOK_PRODUCCION, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    if (response.ok) {
                        // Descargar PDF (el blob)
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `Documento_Legal_${data.servicio}.pdf`;
                        document.body.appendChild(a);
                        a.click();
                        btn.innerHTML = "‚úÖ ¬°Documento Descargado!";
                        setTimeout(() => { btn.innerHTML = "GENERAR DOCUMENTO GRATIS ‚ö°"; btn.disabled = false; }, 3000);
                    } else {
                        // Intentar leer error
                        const errorText = await response.text();
                        alert(`Error al conectar: ${response.status} - ${errorText}`);
                        btn.disabled = false;
                        btn.innerHTML = "GENERAR DOCUMENTO GRATIS ‚ö°";
                    }
                } catch (error) {
                    console.error(error);
                    alert("Error de conexi√≥n. Verifique su internet.");
                    btn.disabled = false;
                    btn.innerHTML = "GENERAR DOCUMENTO GRATIS ‚ö°";
                }
            });
        </script>
    </section>

    <a href="https://wa.me/573000000000" class="float-wa" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>



    <footer
        style="background: #0f172a; color: #cbd5e1; padding: 3rem 1rem; margin-top: 4rem; border-top: 6px solid #2563EB;">
        <div style="max-width: 1000px; margin: 0 auto; text-align: center;">

            <div style="margin-bottom: 1.5rem;">
                <i class="fas fa-balance-scale" style="font-size: 2.5rem; color: #F59E0B; margin-bottom: 10px;"></i>
                <h3 style="color: white; margin: 0; font-size: 1.5rem;">Dr. Manuel Enrique Prada Forero</h3>
                <p style="margin: 5px 0; font-weight: 600; color: #94a3b8;">Abogado Titulado & Litigante</p>
                <div
                    style="background: rgba(255,255,255,0.1); display: inline-block; padding: 5px 15px; border-radius: 50px; margin-top: 10px;">
                    <i class="fas fa-id-card"></i> T.P. 176.633 del C.S. de la J.
                </div>
            </div>

            <div
                style="background: #1e293b; padding: 1.5rem; border-radius: 12px; border: 1px dashed #475569; margin: 2rem auto; max-width: 600px;">
                <p style="margin-top: 0; color: #e2e8f0; font-size: 0.9rem;">
                    <i class="fas fa-shield-alt" style="color: #10b981;"></i> <strong>TRANSPARENCIA TOTAL:</strong>
                    En GUANES Legal Tech operamos bajo estricta √©tica profesional. Puede verificar la vigencia de
                    nuestra licencia directamente en el Registro Nacional de Abogados:
                </p>
                <a href="https://vigenciaspublicas.ramajudicial.gov.co/Certificados.aspx" target="_blank"
                    style="color: #F59E0B; text-decoration: underline; font-weight: 700; font-size: 1rem;">
                    <i class="fas fa-external-link-alt"></i> Verificar T.P. 176.633 en Rama Judicial
                </a>
            </div>

            <p style="font-size: 0.8rem; opacity: 0.7;">
                ¬© 2026 GUANES Legal Tech. Todos los derechos reservados.<br>
                El uso de esta plataforma implica la aceptaci√≥n de nuestros t√©rminos de servicio.
                Documentos generados con asistencia de IA bajo supervisi√≥n humana calificada.
            </p>
        </div>
    </footer>

    <script>
        // ==========================================
        // 0. MODAL BLOCKCHAIN
        // ==========================================


        function copyWallet() {
            const wallet = document.getElementById('walletAddress').innerText;
            navigator.clipboard.writeText(wallet).then(() => {
                alert("Direcci√≥n copiada al portapapeles");
            });
        }

        function copyWallet() {
            const wallet = document.getElementById('walletAddress').innerText;
            navigator.clipboard.writeText(wallet).then(() => {
                alert("Direcci√≥n copiada al portapapeles");
            });
        }

        // ==========================================
        // 1. CONFIGURACI√ìN MAESTRA (PAGOS Y CEREBROS)
        // ==========================================
        const WOMPI_PUBLIC_KEY = "pub_prod_jzFdvrOaXRlOEHifpzvBpm0FKMsq9FLh";
        const PRECIO_DOCUMENTO = 5000000; // $50.000 COP (en centavos)

        // ‚ö†Ô∏è CEREBROS CONECTADOS
        // Aseg√∫rate de que estos Webhooks sean los definitivos de tu Railway
        const WEBHOOK_FORMULARIO = "https://n8n-production-612f.up.railway.app/webhook/cb4edfe2-eaea-47dd-8f97-22afccd72810";
        const WEBHOOK_NOTICIAS = "https://n8n-production-612f.up.railway.app/webhook/noticias-juridicas";
        const WEBHOOK_CALCULADORA = "https://n8n-production-612f.up.railway.app/webhook/calculadora-laboral";

        // Inyectamos Wompi
        const scriptWompi = document.createElement('script');
        scriptWompi.src = "https://checkout.wompi.co/widget.js";
        document.head.appendChild(scriptWompi);

        // ==========================================
        // 2. L√ìGICA DE LA CALCULADORA LABORAL
        // ==========================================
        document.getElementById('laborForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> CALCULANDO...'; btn.disabled = true;

            const data = {
                salario: document.getElementById('lab_salario').value,
                motivo: document.getElementById('lab_motivo').value,
                fechaInicio: document.getElementById('lab_inicio').value,
                fechaFin: document.getElementById('lab_fin').value
            };

            try {
                const req = await fetch(WEBHOOK_CALCULADORA, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const res = await req.json();

                if (res.error) { alert(res.mensaje || "Error en fechas"); return; }

                const fmt = (n) => new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', maximumFractionDigits: 0 }).format(n);

                // Llenar tabla
                document.getElementById('res_dias').innerText = res.dias_liquidados;
                document.getElementById('res_aux').innerText = res.auxilio_estado;
                document.getElementById('res_cesantias').innerText = fmt(res.conceptos.cesantias);
                document.getElementById('res_intereses').innerText = fmt(res.conceptos.intereses);
                document.getElementById('res_prima').innerText = fmt(res.conceptos.prima);
                document.getElementById('res_vacaciones').innerText = fmt(res.conceptos.vacaciones);
                document.getElementById('res_indemnizacion').innerText = fmt(res.conceptos.indemnizacion);
                document.getElementById('res_norma_indem').innerText = res.norma_indem;
                document.getElementById('res_total').innerText = fmt(res.total);

                // Mostrar
                const resultDiv = document.getElementById('laborResult');
                resultDiv.style.display = 'block';
                resultDiv.scrollIntoView({ behavior: 'smooth' });

            } catch (e) {
                console.error(e);
                alert("Error de conexi√≥n con el servidor de c√°lculo.");
            } finally {
                btn.innerHTML = originalText; btn.disabled = false;
            }
        });

        // ==========================================
        // 3. SISTEMA DE NOTICIAS üì∞ (VITAL VS PATRIMONIO)
        // ==========================================
        async function cargarNoticias() {
            const newsBar = document.getElementById('dailyNewsText');

            // CONFIGURACI√ìN: ¬øCu√°ntos d√≠as dura su campa√±a?
            const DIAS_PROMOCION = 3;
            const TIEMPO_LIMITE = DIAS_PROMOCION * 24 * 60 * 60 * 1000;

            try {
                // 1. REVISAR QU√â TENEMOS EN BODEGA
                let vitalGuardada = JSON.parse(localStorage.getItem('guanes_vital_promo_v2'));
                let patrimonioGuardado = JSON.parse(localStorage.getItem('guanes_patrimonio_promo_v2'));
                const ahora = Date.now();

                // 2. VERIFICAR VIGENCIA
                let mostrarVital = null;
                let mostrarPatrimonio = null;

                if (vitalGuardada && (ahora - vitalGuardada.timestamp < TIEMPO_LIMITE)) {
                    mostrarVital = vitalGuardada.data;
                }
                if (patrimonioGuardado && (ahora - patrimonioGuardado.timestamp < TIEMPO_LIMITE)) {
                    mostrarPatrimonio = patrimonioGuardado.data;
                }

                // 3. CONSULTAR NOTICIAS NUEVAS (N8N)
                const response = await fetch(WEBHOOK_NOTICIAS, { method: 'POST' });
                if (response.ok) {
                    const data = await response.json();

                    // Barra Superior
                    if (newsBar) {
                        newsBar.style.opacity = 0;
                        setTimeout(() => {
                            newsBar.innerHTML = `<a href="${data.news_link}" target="_blank" style="color: white; text-decoration: none;"><i class="fas fa-newspaper"></i> ${data.news_text}</a>`;
                            newsBar.style.opacity = 1;
                        }, 500);
                    }

                    // 4. DECISI√ìN: REEMPLAZAR O MANTENER
                    const tipo = data.service_type || "Tr√°nsito";

                    // VITAL (Izquierda)
                    if (!mostrarVital) {
                        if (tipo.includes("Laboral") || tipo.includes("Salud") || tipo.includes("Pensi√≥n")) {
                            const nuevaPromo = { data: data, timestamp: Date.now() };
                            localStorage.setItem('guanes_vital_promo_v2', JSON.stringify(nuevaPromo));
                            mostrarVital = data;
                        } else {
                            // NOTICIA POR DEFECTO (EPS) - Fallback
                            mostrarVital = {
                                news_text: "üö® TRIUNFO HIST√ìRICO: Corte ordena a EPS autorizar servicios fundamentales...",
                                news_link: "https://redmas.com.co",
                                marketing_hook: "¬øSu EPS le niega autorizaciones o medicamentos? Este nuevo fallo lo blinda. Radicamos su TUTELA hoy mismo.",
                                service_type: "Salud"
                            };
                        }
                    }

                    // PATRIMONIO (Derecha)
                    if (!mostrarPatrimonio) {
                        if (tipo.includes("Tr√°nsito") || tipo.includes("Inmuebles") || tipo.includes("Cobro") || tipo.includes("Civil")) {
                            const nuevaPromo = { data: data, timestamp: Date.now() };
                            localStorage.setItem('guanes_patrimonio_promo_v2', JSON.stringify(nuevaPromo));
                            mostrarPatrimonio = data;
                        } else {
                            mostrarPatrimonio = {
                                news_text: "Alerta Conductores: C√°maras de Fotodetecci√≥n ilegales",
                                news_link: "https://www.mintransporte.gov.co",
                                marketing_hook: "¬øLe lleg√≥ una fotomulta vieja? No pague. La ley le permite anularla por debido proceso.",
                                service_type: "Tr√°nsito"
                            };
                        }
                    }
                }

                // 5. RENDERIZAR
                if (mostrarVital) renderCard('Vital', mostrarVital);
                if (mostrarPatrimonio) renderCard('Patrimonio', mostrarPatrimonio);

            } catch (e) { console.warn("Modo Offline (Noticias)", e); }
        }

        function renderCard(tipo, data) {
            const bodyId = `card${tipo}Body`;
            const container = document.getElementById(bodyId);
            if (!container) return;

            let icono = "fa-file-contract";
            let accion = "GESTIONAR CASO";
            let colorBtn = tipo === 'Vital' ? 'btn-vital' : 'btn-patrimonio';

            if (data.service_type.includes("Laboral")) { icono = "fa-user-shield"; accion = "RECLAMAR DERECHOS"; }
            if (data.service_type.includes("Salud")) { icono = "fa-heartbeat"; accion = "INTERPONER TUTELA"; }
            if (data.service_type.includes("Tr√°nsito")) { icono = "fa-traffic-light"; accion = "SOLICITAR NULIDAD"; }
            if (data.service_type.includes("Inmuebles")) { icono = "fa-home"; accion = "REVISAR CONTRATO"; }

            container.innerHTML = `
                <div>
                    <h3 class="radar-title">
                        <a href="${data.news_link}" target="_blank" style="color:inherit; text-decoration:none;">
                            ${data.news_text.replace("√öLTIMA HORA: ", "").substring(0, 90)}... <i class="fas fa-external-link-alt" style="font-size:0.7rem; opacity:0.5;"></i>
                        </a>
                    </h3>
                    <p class="radar-hook">${data.marketing_hook}</p>
                </div>
                <button onclick="activarServicio('${data.service_type}')" class="radar-btn ${colorBtn}">
                    <i class="fas ${icono}"></i> ${accion} (GRATIS)
                </button>
            `;
        }

        cargarNoticias();

        // ==========================================
        // 4. NAVEGACI√ìN Y FORMULARIO
        // ==========================================
        function activarServicio(palabraClave) {
            const select = document.getElementById('servicioSelect');
            const formSection = document.getElementById('app-generator');
            formSection.scrollIntoView({ behavior: 'smooth' });
            for (let i = 0; i < select.options.length; i++) {
                if (select.options[i].text.includes(palabraClave) || select.options[i].value.includes(palabraClave)) {
                    select.selectedIndex = i;
                    break;
                }
            }
            toggleFields();
        }

        function toggleFields() {
            const s = document.getElementById('servicioSelect').value;
            const mods = {
                laboral: document.getElementById('camposLaborales'),
                inmuebles: document.getElementById('camposInmuebles'),
                vehiculos: document.getElementById('camposVehiculos'),
                transito: document.getElementById('camposTransito'),
                salud: document.getElementById('camposSalud'),
                civil: document.getElementById('camposCivil')
            };
            Object.values(mods).forEach(d => { if (d) { d.classList.add('hidden'); setRequired(d, false); } });

            const idContraparte = document.querySelector('input[name="Contraparte_ID"]');
            if (idContraparte) idContraparte.required = true;

            if (s.includes("Laboral")) show(mods.laboral);
            else if (s.includes("Inmuebles")) show(mods.inmuebles);
            else if (s.includes("Veh√≠culos")) show(mods.vehiculos);
            else if (s.includes("Tr√°nsito")) show(mods.transito);
            else if (s.includes("Salud")) show(mods.salud);
            else if (s.includes("Cobro")) show(mods.civil);
        }

        function show(div) { if (div) { div.classList.remove('hidden'); setRequired(div, true); } }
        function setRequired(div, isReq) { div.querySelectorAll('input, select').forEach(i => i.required = isReq); }

        // ==========================================
        // 5. L√ìGICA DE PAGO Y GENERACI√ìN (DOCUMENTOS)
        // ==========================================
        const form = document.getElementById('legalForm');
        const statusDiv = document.getElementById('statusMessage');
        const submitBtn = document.getElementById('submitBtn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (typeof WidgetCheckout === 'undefined') { alert("Cargando sistema..."); return; }

            const formData = new FormData(form);
            const rawData = Object.fromEntries(formData.entries());

            // --- L√ìGICA V2.0: ESTRUCTURACI√ìN DEL PAYLOAD ---
            const servicioTexto = document.getElementById('servicioSelect').value;
            let servicioID = "otros";

            if (servicioTexto.includes("Laboral")) servicioID = "laboral";
            else if (servicioTexto.includes("Inmobiliarios")) servicioID = "inmuebles";
            else if (servicioTexto.includes("Veh√≠culos")) servicioID = "vehiculos";
            else if (servicioTexto.includes("Fotomultas")) servicioID = "transito";
            else if (servicioTexto.includes("Tutela")) servicioID = "salud";
            else if (servicioTexto.includes("Cobro")) servicioID = "cobro";

            // Construcci√≥n del objeto 'detalles' seg√∫n el servicio
            let detalles = {};
            if (servicioID === "laboral") {
                detalles = {
                    contraparte: rawData.Contraparte, // Empleador
                    contraparte_id: rawData.Contraparte_ID,
                    salario: rawData.salario,
                    fecha_inicio: rawData.fecha_inicio,
                    fecha_fin: rawData.fecha_fin,
                    motivo: rawData.motivo_salida
                };
            } else if (servicioID === "inmuebles") {
                detalles = {
                    contraparte: rawData.Contraparte, // Inquilino/Otro
                    contraparte_id: rawData.Contraparte_ID,
                    direccion_inmueble: rawData.inmueble_direccion,
                    canon_valor: rawData.inmueble_valor,
                    fecha_inicio: rawData.inmueble_fecha,
                    rol_cliente: rawData.inmueble_rol,
                    tipo_contrato: rawData.inmueble_tipo,
                    matricula: rawData.inmueble_matricula
                };
            } else if (servicioID === "vehiculos") {
                detalles = {
                    contraparte: rawData.Contraparte,
                    contraparte_id: rawData.Contraparte_ID,
                    placa: rawData.vehiculo_placa,
                    marca_modelo: `${rawData.vehiculo_marca} ${rawData.vehiculo_modelo}`,
                    valor_venta: rawData.vehiculo_valor,
                    rol_cliente: rawData.vehiculo_rol,
                    motor_chasis: rawData.vehiculo_motor_chasis
                };
            } else if (servicioID === "transito") {
                detalles = {
                    organismo: rawData.Contraparte, // "Tr√°nsito de..."
                    placa: rawData.transito_placa,
                    fecha_comparendo: rawData.transito_fecha,
                    notificacion: rawData.transito_notificacion
                };
            } else if (servicioID === "salud" || servicioID === "cobro") {
                detalles = {
                    contraparte: rawData.Contraparte,
                    contraparte_id: rawData.Contraparte_ID,
                    hechos_pretension: rawData.Relato || rawData.salud_negacion || ("Cobro de: " + rawData.civil_monto),
                    urgencia_riesgo: rawData.salud_riesgo,
                    monto_deuda: rawData.civil_monto,
                    vencimiento: rawData.civil_vencimiento
                };
            }

            // Si hay relato adicional, lo adjuntamos
            if (rawData.Relato && !detalles.hechos_pretension) {
                detalles.notas_adicionales = rawData.Relato;
            }

            // PAYLOAD FINAL V2.0
            const payload = {
                "servicio": servicioID,
                "cliente": {
                    "nombre": rawData.Nombre,
                    "cedula": rawData.ID,
                    "email": rawData.Correo,
                    "ciudad": rawData.Ciudad
                },
                "detalles": detalles,
                "tipo_pago": "GRATIS_BETA",
                "meta": {
                    "timestamp": new Date().toISOString(),
                    "ref": 'GRATIS_PROMO_' + Date.now()
                }
            };

            localStorage.setItem('datos_pendientes_guanes', JSON.stringify(payload));

            // ENV√çO DIRECTO (Bypass de Pagos)
            procesarGeneracion(payload);
        });

        window.onload = function () {
            const urlParams = new URLSearchParams(window.location.search);
            const wompiId = urlParams.get('id');
            if (wompiId) {
                const datosGuardados = localStorage.getItem('datos_pendientes_guanes');
                if (datosGuardados) {
                    const data = JSON.parse(datosGuardados);
                    data.Transaccion_ID = wompiId;
                    statusDiv.style.display = 'block';
                    statusDiv.innerHTML = '<h3>üí∞ Pago Detectado</h3><p>Validando...</p>';
                    window.history.replaceState({}, document.title, "/");
                    procesarGeneracion(data);
                }
            }
        };

        async function procesarGeneracion(data) {
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> GENERANDO PDF...';
            statusDiv.style.display = 'block';
            statusDiv.style.background = '#eff6ff';
            statusDiv.innerHTML = '<h3>‚öñÔ∏è Redactando...</h3><p>Espere 30 seg...</p>';

            try {
                const response = await fetch(WEBHOOK_FORMULARIO, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data)
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `Documento_GUANES_${data.Nombre.replace(/\s+/g, '_')}.pdf`;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);

                    statusDiv.innerHTML = '<h3>‚úÖ ¬°LISTO!</h3><p>Documento descargado.</p>';
                    localStorage.removeItem('datos_pendientes_guanes');
                    form.reset();
                } else {
                    const errorText = await response.text();
                    throw new Error(`Error ${response.status}: ${errorText || response.statusText}`);
                }
            } catch (error) {
                console.error(error);
                statusDiv.style.background = '#fef2f2';
                statusDiv.style.color = '#dc2626';
                statusDiv.innerHTML = `<h3>‚ö†Ô∏è ERROR</h3><p>Detalle: ${error.message}</p><p>Por favor, tome una captura y cont√°ctenos.</p>`;
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-magic"></i> GENERAR DOCUMENTO (GRATIS)';
            }
        }
    </script>
</body>

</html>